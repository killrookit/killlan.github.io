<main class="main-container ng-scope" ng-view=""><div class="main receptacle post-view ng-scope"><article class="entry ng-scope" ng-controller="EntryCtrl" ui-lightbox=""><header><h1 class="entry-title ng-binding">小谈移动APP安全</h1><div class="entry-meta"><a target="_blank" class="author name ng-binding">zzR</a> <span class="bull">·</span> <time title="2013/11/26 16:27" ui-time="" datetime="2013/11/26 16:27" class="published ng-binding ng-isolate-scope">2013/11/26 16:27</time></div></header><section class="entry-content ng-binding" ng-bind-html="postContentTrustedHtml"><p></p><h2>0x00 背景</h2><hr><p>随着移动互联的扩张，移动APP承载了更多企业的终端梦。“用户手机安装APP以后，企业即埋下一颗种子，可持续与用户保持联系。”  种子是种下了，可要是它本身就是个[特洛伊木马]呢?试想你在某某知名APP平台下载安装一款知名APP，深更半夜突然响起了[THE PHANTOM OF THE OPERA]那会是怎样的一种情景！</p><p>通过这近一个月来的观察和实验，斗胆在这里简单介绍一下手机移动APP安全测试方法、工具和一些容易产生安全问题的点。（此处仅就IOS版本APP进行说明）</p><h2>0x01 细节</h2><hr><p>1.工具：PC、手机；软件：burpsuite/fiddler、sqlmap等</p><p>2.代理设置：首先将你的PC和手机置于同一局域网，在PC上打开burpsuite ，proxy选项proxy-listeners</p><p><img alt="2013112609332157216.png" img-src="99dc34547a0481e4b2b91e4c3b7d4d008f490448.jpg"></p><p>new/edit一下吧</p><p><img alt="2013112609341832703.png" img-src="5b40db4a693ca8cef6733f29e9065a47d5477d3e.jpg"></p><p>在下拉列表中能够找到PC本机IP，同时可以自定义端口，此处设置了8088。</p><p>手机端，连接WIFI后，网络属性设置代理，写上上图IP地址和端口号</p><p><img alt="2013112609432012548.png" img-src="678eefaef71b05f2969241153302e34c1f6b6ba1.jpg"></p><p>此时您的PC端burpsuite就设置完成。</p><p>3.接下来就是找到你感兴趣的APP对他们进行友情测试了。测试过程中，有几个安全点我在之前提交的报告中也都提到了，WEB端存在的问题在移动端同样存在（小伙伴们可针对OWASP TOP 10有针对性进行测试，其他此处不尽详表），只是现在WEB前端重兵把守，兵强马壮，而移动端尚未得到足够的重视，相对薄弱，应者那句世界名言，我们何不找找小道前行？</p><p>说的这里，提几个比较具有代表性（易发现易批量应用，对隐私数据影响大）的安全关注点：</p><p>由于缺乏对移动端安全防护，并且未对APP客户端用户数据做过滤导致SQL注入等一系列问题（跨站／ＣＳＲＦ什么的那就不说了）</p><p><a target="_blank" href="http://www.wooyun.org/bugs/wooyun-2013-042356">WooYun: 乐视网App端Sql注入Num 1</a></p><p>模糊的用户权鉴往往造成各式各样的越权操作，用户隐私数据得不到安全保障；不安全的数据传输过程，敏感数据篡改（登陆、支付）</p><p><a target="_blank" href="http://www.wooyun.org/bugs/wooyun-2013-041489">WooYun: 乐视网2200万用户任意用户登录</a></p><p><a target="_blank" href="http://www.wooyun.org/bugs/wooyun-2013-041079">WooYun: 中粮我买网APP越权操作缺陷04（删除/修改任意用户信息）</a></p><p>应用设计存在逻辑缺陷导致的跨界</p><p><a target="_blank" href="http://www.wooyun.org/bugs/wooyun-2013-020065">WooYun: 百度某应用设计缺陷可直接浏览企业内部关键系统甚至渗透</a></p><p>移动云端系统载体自身存在缺陷，导致服务器沦陷。如app云端存在远程命令执行漏洞、任意文件上传getshell等</p><p><a target="_blank" href="http://www.wooyun.org/bugs/wooyun-2013-041652">WooYun: 凡客某站远程命令执行</a></p><p>移动安全平台、推广平台存在安全缺陷导致海量APP可被操纵，恶意APP侵害移动用户。</p><p><a target="_blank" href="http://www.wooyun.org/bugs/wooyun-2013-036910">WooYun: 乐视网某主站站控制不严可传播恶意app感染手机端</a></p><p><a target="_blank" href="http://www.wooyun.org/bugs/wooyun-2013-040266">WooYun: 联想1#某站权限控制不严导致预装恶意App流毒</a></p><p>以上方法针对少量APP测试还是挺实用的，这个月测试下来，就如一位皂友所说，发现这些问题是比较繁琐，但是出现的问题概率比较大。所以问题还是挺好找<a class="__cf_email__" href="/cdn-cgi/l/email-protection" data-cfemail="37d0adb3d4b7b5d28aa4d1bfa6d29aabd29aabd38fbad2b791d2bab0d08d90d0adb3d1a081d2b7ae774f44445245">[email&#160;protected]</a> 给俺一个非常不错的建议用于批量检测：在本地搭建http代理记录APP访问日志，然后sqlmap批量扫这些去重的日志！很赞！</p><h2>0x02 总结</h2><hr><p>各厂商在APP程序开发的过程中严格执行开发安全处置流程同时将WEB应用防线扩至移动端！</p><p>各APP应用、推广平台加强自身安全防范，升级安全基线，确保平台之安全可靠，要知道，你们可承载着万千互联网企业的中国梦-0-<br>最后，各大厂商、平台抱好你们的APP了，皂友们要来啦！</p><p></p></section></article><div class="entry-controls clearfix"><div style="float:left;color:#9d9e9f;font-size:15px"><span>&copy;乌云知识库版权所有 未经许可 禁止转载</span></div></div><div class="yarpp-related"><h3>为您推荐了适合您的技术文章:</h3><ol id="recommandsystem"><li><a href="http://drops.wooyun.org/papers/2035" rel="bookmark" id="re1">一些常见的重置密码漏洞分析整理</a></li><li><a href="http://drops.wooyun.org/papers/346" rel="bookmark" id="re2">终端机的安全性</a></li><li><a href="http://drops.wooyun.org/papers/345" rel="bookmark" id="re3">在线支付逻辑漏洞总结</a></li><li><a href="http://drops.wooyun.org/papers/506" rel="bookmark" id="re4">[代码审计]web程序对客户端数据加解密带来的安全问题</a></li></ol></div><div id="comments" class="comment-list clearfix"><div id="comment-list"><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">zibai</span> <span class="reply-time">2015-10-29 18:40:43</span></div><p></p><p>android应用安全测试平台，http://mqc.aliyun.com/security.htm</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">爱加密</span> <span class="reply-time">2015-10-23 17:50:53</span></div><p></p><p>移动安全问题刻不容缓，保护好自己开发的APP是开发者的义务和责任，爱加密愿意为你守护好你的APP。</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">学途无忧网</span> <span class="reply-time">2015-10-15 14:04:51</span></div><p></p><p>移动手机APP测试从初级到提升（初级篇）<br>课程观看地址：http://www.xuetuwuyou.com/course/41</p><p>移动手机APP测试从初级到提升（进阶篇）<br>课程观看地址：http://www.xuetuwuyou.com/course/42</p><p>移动手机APP测试从初级到提升（提升篇）<br>观看地址：http://www.xuetuwuyou.com/course/43</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">kris</span> <span class="reply-time">2015-07-26 23:40:36</span></div><p></p><p>最近在测试app&gt;饭看下。，。。</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">chavez_wang</span> <span class="reply-time">2015-07-05 20:23:03</span></div><p></p><p>最近也碰到了，代理了就不能正常通讯，<a class="__cf_email__" href="/cdn-cgi/l/email-protection" data-cfemail="6e88dfec89ceda102e05170a061417">[email&#160;protected]</a> @Arthur @hkAssassin</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">kydhzy</span> <span class="reply-time">2015-06-04 09:55:02</span></div><p></p><p>@hkAssassin 遇到过 不知道怎么解决 ，，，怎么办</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">Arthur</span> <span class="reply-time">2015-02-10 03:45:07</span></div><p></p><p>有关于IOS的推荐吗？这个貌似只适用于安卓。</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">Arthur</span> <span class="reply-time">2015-02-10 03:41:40</span></div><p></p><p>应该是端口问题，有些APP指定了端口，而burp大部分人设置的都是80端口。应该是这个问题吧</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">hkAssassin</span> <span class="reply-time">2015-02-09 15:01:27</span></div><p></p><p>设置了代理有些app无法运行，楼主遇到过这种情况没！</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">zt22172</span> <span class="reply-time">2015-01-09 16:10:52</span></div><p></p><p>赞一个</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">random_</span> <span class="reply-time">2014-06-10 19:42:54</span></div><p></p><p>赞一个</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">Focusstart</span> <span class="reply-time">2014-05-14 10:41:48</span></div><p></p><p>mark!</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">Comer</span> <span class="reply-time">2014-04-10 17:23:52</span></div><p></p><p>忘记重连，然后ip port都有了</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">U神</span> <span class="reply-time">2014-03-23 14:28:39</span></div><p></p><p>安卓手机找不到代理啊！！！！</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">苗巫</span> <span class="reply-time">2014-03-01 08:12:06</span></div><p></p><p>BURP和proxydroid都设置好了，就是抓不到包，不知道为啥？</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">her0ma</span> <span class="reply-time">2014-02-09 12:51:58</span></div><p></p><p>遇到过一次,给后台造了很多垃圾数据……还要没造成啥影响！</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">px1624</span> <span class="reply-time">2013-12-28 01:09:10</span></div><p></p><p>这个方法估计测试app越权不错</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">yhoojj</span> <span class="reply-time">2013-12-16 10:36:51</span></div><p></p><p>原来在这里啊，马一个</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">小胖子</span> <span class="reply-time">2013-12-13 11:50:32</span></div><p></p><p>宝贝，AWVS的扫描头又不能改，在加速乐或者其他CDN面前直接被挡，而且狗日的AWVS有时候控制不住自己，一个子就上传啊删除神马的，伤不起。</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">HackBraid</span> <span class="reply-time">2013-12-09 14:20:25</span></div><p></p><p>楼主V5，学习了！</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">zzR</span> <span class="reply-time">2013-12-08 21:23:22</span></div><p></p><p>你设置的代理那个地址可以上网就行阿，工具熟悉一下就成</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link"><a class="__cf_email__" href="/cdn-cgi/l/email-protection" data-cfemail="e49ea4879c">[email&#160;protected]</a></span> <span class="reply-time">2013-12-07 22:04:54</span></div><p></p><p>设置完了，手机连不上网，俺不熟悉这款工具额。。。</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">乌贼NO.1</span> <span class="reply-time">2013-12-06 08:58:19</span></div><p></p><p>手动设置代理麻烦，可以直接用ProxyDroid进行设置。以后要用代理的话，直接启用它，不用则关闭，方便切换。</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">Chora</span> <span class="reply-time">2013-12-03 23:33:19</span></div><p></p><p>先spider了再active scanning扫描的比较全面，不过burp的扫描跟awvs相比还是有稍许差距的。</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">小川</span> <span class="reply-time">2013-12-02 09:51:25</span></div><p></p><p>原来如此~</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">小 葛</span> <span class="reply-time">2013-11-30 13:13:14</span></div><p></p><p>android 的怎么设置 链接无线时 有个 代理 貌似不能用。。</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">带馅儿馒头</span> <span class="reply-time">2013-11-30 11:23:54</span></div><p></p><p>小哥，已经写了呀，我还说考完试，写个相关的paper呢~赞一个</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">G8dSnow</span> <span class="reply-time">2013-11-27 17:22:03</span></div><p></p><p>你这基本上是对后端的安全测试，与传统的web安全无异</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">zzR</span> <span class="reply-time">2013-11-27 10:06:13</span></div><p></p><p>这种方法却是比我那种简化了，live scanning 里active scanning 选择ues suite scope[defined in target tab]直接读取访问日志了，现在大多数厂商APP功能还是比较简单的，做几个最基本的访问请求操作，然后放到scanner就见到成效的应该不会少-0-</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">TMaMba</span> <span class="reply-time">2013-11-27 09:48:01</span></div><p></p><p>“Actively scan this host”是基于APP访问日志扫描的，但是地址和参数还得通过手动访问得到，把APP访问变成自动化就更高效了</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">zzR</span> <span class="reply-time">2013-11-27 09:42:26</span></div><p></p><p>受教了，今早试了一把，确实是能够扫描常见的web漏洞唻，直接do an actie scan ，不错幺</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">齐迹</span> <span class="reply-time">2013-11-27 09:33:02</span></div><p></p><p>简单得方法就是把所有的功能都用一遍！</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">瞌睡龙</span> <span class="reply-time">2013-11-26 18:30:00</span></div><p></p><p>本身的Actively scan this host扫描就相当于一个web扫描器，常见漏洞都会扫一遍xss sql注入之类的，而且规则还是蛮强大的~里面的url同时也可以导出，自己做处理都可以~</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">TMaMba</span> <span class="reply-time">2013-11-26 17:57:41</span></div><p></p><p>app 接口扫描是个问题，怎么用工具把接口全部列出来</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">TMaMba</span> <span class="reply-time">2013-11-26 17:57:05</span></div><p></p><p>burp 有sqlmap插件的哇</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">xsser</span> <span class="reply-time">2013-11-26 17:48:49</span></div><p></p><p>burpsuit 支持扫描SQL之类的插件么</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">瞌睡龙</span> <span class="reply-time">2013-11-26 16:30:18</span></div><p></p><p>测试其实用burpsuit抓包代理之后，可以用自带的“Actively scan this host” 来扫描，还是非常强大的 :)</p><p></p></div></div></div></div></div></main>