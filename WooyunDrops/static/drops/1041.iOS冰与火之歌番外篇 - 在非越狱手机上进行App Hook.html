<main class="main-container ng-scope" ng-view=""><div class="main receptacle post-view ng-scope"><article class="entry ng-scope" ng-controller="EntryCtrl" ui-lightbox=""><header><h1 class="entry-title ng-binding">iOS冰与火之歌番外篇 - 在非越狱手机上进行App Hook</h1><div class="entry-meta"><a target="_blank" class="author name ng-binding">蒸米</a> <span class="bull">·</span> <time title="2016/02/18 10:19" ui-time="" datetime="2016/02/18 10:19" class="published ng-binding ng-isolate-scope">2016/02/18 10:19</time></div></header><section class="entry-content ng-binding" ng-bind-html="postContentTrustedHtml"><p></p><h1>0x00 序</h1><hr><p>冰指的是用户态，火指的是内核态。如何突破像冰箱一样的用户态沙盒最终到达并控制如火焰一般燃烧的内核就是《iOS冰与火之歌》这一系列文章将要讲述的内容。但在讲主线剧情前，我们今天先聊一聊分支剧情 - 在非越狱的iOS上进行App Hook。利用这个技术，你可以在非越狱的iOS系统上实现各种hook功能（e.g., 微信自动抢红包，自动聊天机器人，游戏外挂等），但写这篇文章的目的并不是鼓励大家使用外挂，更不是鼓励大家去卖外挂，所以千万不要用这个技术去做一些违法的事情。</p><p>《iOS冰与火之歌》系列的目录如下：</p><ol><li>Objective-C Pwn and iOS arm64 ROP</li><li>在非越狱的iOS上进行App Hook（番外篇）</li><li>█████████████</li><li>█████████████</li><li>█████████████</li></ol><p>另外文中涉及代码可在我的github下载:<br><a href="https://github.com/zhengmin1989/iOS_ICE_AND_FIRE">https://github.com/zhengmin1989/iOS&#95;ICE&#95;AND_FIRE</a></p><h1>0x01 Mach-O LC&#95;LOAD&#95;DYLIB Hook</h1><hr><p>要是看过我写的安卓动态调试七种武器之离别钩 – Hooking（上）<a href="http://drops.wooyun.org/tips/9300">http://drops.wooyun.org/tips/9300</a> 和 安卓动态调试七种武器之离别钩 – Hooking（下）<a href="http://drops.wooyun.org/papers/10156">http://drops.wooyun.org/papers/10156</a> 的同学应该知道在android进行hook的方法可以是五花八本的。其实在iOS上进行hook的方式也有很多，但是大多数都需要越狱后才能实现（比如大家最常用的Cydia Substrate），今天我就来介绍一种不需要越狱就能hook iOS app方法，也就是<code>Mach-O LC_LOAD_DYLIB Hook</code>。这种方法是通过修改binary本身来加载第三方dylib并实现hook，具体思路是：</p><p>提取ipa中的二进制文件 -> 修改二进制文件的Load Commands列表，加入要hook的dylib –> hook.dylib在函数constructor函数中完成对特定函数的hook->对修改后的ipa进行签名，打包和安装。</p><p>首先我们先来看一下我们将要进行注入的目标app，这个app非常简单，就是调用上一章讲过的talker这个类输出一句”Hello, iOS!”。</p><p><img alt="p1" img-src="8f3d1fc47590386109f07b4f4a8e3872005825b6.jpg"></p><p>在Products文件夹中我们能够看到IceAndFire.app这个文件，也就是编译完后的app：</p><p><img alt="p2" img-src="82dd09693288b233a4df703be885cd0382ae0364.jpg"></p><p>IceAndFire.app其实就是个文件夹，里面可以看到很多的资源文件（签名信息，图片等），但最重要的东西就是与文件夹同名的IceAndFire这个二进制文件了。我们可以用xxd命令来看一下里面的内容：</p><p><img alt="p3" img-src="41309a3773cf9f353f621f2dec813a9df499a680.jpg"></p><p>这个二进制文件里保存了IceAndFire这个app的所有逻辑，但是直接看二进制编码太辛苦了，这里我推荐一个叫做MachOView的软件（可以在我的github里下载），通过这个软件就可以看到整个MachO文件的结构了：</p><p><img alt="p4" img-src="88c9369c55a76172218120c17b607af8aaa57625.jpg"></p><p>在Load Commands这个数据段里，我们可以看到IceAndFire这个二进制文件会在启动的时候自动加载Foundation, libobjc.A.dylib等动态库。如果我们对MachO这个文件的Load Commands结构体进行修改，是不是就可以让IceAndFire这个app在启动的时候加载我们自定义的用来hook的dylib呢？没错，这个想法是可行的。并且我们只要在dylib的构造函数里完成相应的hook逻辑，就可以在app启动的时候对指定函数进行hook操作了。</p><p>那么如何修改MachO的结构体呢？用010 editor等二进制编辑器的确是一种方法，但实在是麻烦了点。好消息是金正日小分队已经把自动注入dylib的工具帮我们写好了。这个叫yololib的工具可以帮我们直接进行dylib的注入：<a href="https://github.com/KJCracks/yololib">https://github.com/KJCracks/yololib</a>。但作者只放出了源码没有放出binary，我帮大家编译了一份扔到了我的github上(<a href="https://github.com/zhengmin1989/iOS_ICE_AND_FIRE">https://github.com/zhengmin1989/iOS&#95;ICE&#95;AND_FIRE</a>)。</p><p>编译好yololib后，我们只需要在mac上执行:</p><pre><code>#!bash
./yololib [binary] [dylib file]
./yololib [被插入dylib的二进制文件] [要插入的dylib]
</code></pre><p>命令即可完成dylib的注入，如图所示：</p><p><img alt="p5" img-src="cbae292078f69ae92e5232c950ebfa079b41016d.jpg"></p><p>现在我们再用MachOView看一下IceAndFire这个二进制文件就会看到hook1.dylib已经被我们成功注入进去了：</p><p><img alt="p6" img-src="e59cf7d6390c377b9a3368f41ad94fdbab227efc.jpg"></p><p>“<code>@executable_path/hook1.dylib</code>”的意思是二进制文件会在当前目录下对hook1.dylib进行加载，所以我们编译好的hook1.dylib要和二进制文件一起放到IceAndFire.app文件夹里，这样才能保证我们在运行app的时候hook1.dylib能够被正确的加载。</p><h1>0x02 CaptainHook for Dylib</h1><hr><p>修改好了app二进制文件的Load Commands结构体后，我们再来看看如何构造进行hook的第三方dylib。因为app自己肯定不会主动调用第三方dylib中的函数，所以如果我们想要让第三方dylib进行hook操作就要把hook的逻辑写到构造函数里。实现构造函数很简单，只要在函数前声明 ”<code>__attribute__((constructor)) static</code>” 即可，我们先写个”Hello, Ice and Fire!”测试一下：</p><p><img alt="p7" img-src="d2e8e9abb3f8f56bf1b3780d44e0fd8683e03940.jpg"></p><p>编译好dylib文件后，我们将这个dylib文件与app一起签名、打包、安装。然后我们运行一下程序就可以看到我们注入的dylib库已经在程序启动的时候成功加载并执行了。</p><p><img alt="p8" img-src="ca671a13d048c2d37765cd4ead92fa7d6629fbc5.jpg"></p><p>下一步就是要实现对特定函数的hook。在这里我推荐使用CaptainHook这个framework。作者已经帮我们实现了hook所需要的各种宏，只要按照如下步骤就可以完成针对特定函数的hook：</p><ol><li>使用 CHDeclareClass() 声明想要hook的class</li><li>在构造函数中用 CHLoadClass() 或 CHLoadLateClass() 加载声明过的class</li><li>使用CHMethod() hook相应的method</li><li>在CHMethod()中可以使用CHSuper()来调用原函数</li><li>在构造函数中使用CHClassHook()来注册将要hook的method</li></ol><p>比如我们想要hook Talker这个class里的say method，让app在调用say的时候修改method的参数，让say的话都变成”Hello, Android!”，我们只需要这样编写dylib的源码：</p><pre><code>#!objc
#import &lt;CaptainHook/CaptainHook.h&gt;

CHDeclareClass(Talker);

CHMethod(1, void, Talker, say, id, arg1)
{
    NSString* tmp=@"Hello, Android!";
    CHSuper(1, Talker, say, tmp);
}

__attribute__((constructor)) static void entry()
{
    NSLog(@"Hello, Ice And Fire!");
    CHLoadLateClass(Talker);
    CHClassHook(1, Talker,say);
}
</code></pre><p>CHMethod()这个宏的格式是：参数的个数，返回值的类型，类的名称，selector的名称，selector的类型，selector对应的参数的变量名。</p><p>CHClassHook()这个宏的格式是：参数的个数，返回值的类型，类的名称，selector的名称。</p><p>编写完代码后，我们对源码进行编译，将生成的dylib文件与app一起签名、打包、安装。然后我们运行一下程序就可以看到我们注入的dylib库已经成功的hook了say method了，原本应该输出”Hello, iOS!”，已经被我们成功的变成了”Hello, Android!”：</p><p><img alt="p9" img-src="730738fa08a14dce8205552216cc564dbdea2d0a.jpg"></p><h1>0x03 签名、打包和安装</h1><hr><p>我们知道越狱后的iPhone有一个很重要的特性就是可以关闭app的签名校验，关掉签名校验后，App Store上的app（无论是收费的还是免费的）就可以随意盗版并且免费安装了。但是在非越狱的iPhone上，系统要求app必须要有合法的签名，负责无法进行安装。其实除了AppStore上的app有合法的签名外，我们还可以使用开发者证书或者企业证书来让没有合法签名的app拥有合法的签名。</p><p>当我们拥有开发者帐号并且在机器上安装了证书的话，就可以在Keychain Access这个工具中看到我们的签名信息：</p><p><img alt="p10" img-src="68fa7d302b87b74d0629300ff22c85f38a72c345.jpg"></p><p>我们接下来要干的事情就是使用这个开发者证书来对我们修改后的IceAndFire .app进行签名。步骤如下：</p><ol><li><p>首先先保证IceAndFire.app文件夹下有正确的embedded.mobileprovision文件：</p><p>如果没有的话，可以去苹果的开发者中心（developer.apple.com）生成。如果是个人开发者要注意将iOS设备的UDID加到开发者的设备列表中再生成embedded.mobileprovision文件，如果是企业证书则没有设备数量的限制。</p></li><li><p>正确的编写签名时使用的Entitlements.plist：</p><p>这里最需要注意的就是application-identifier要包含正确的Team ID (可以在开发者中心查看) 和对应的Bundle ID。</p><p><img alt="p11" img-src="6edb5c3e7048bb4ac89a1f7705b9d8bf579beab9.jpg"></p></li><li><p>使用codesign对hook的dylib进行签名：</p><pre><code>#!bash
codesign -f -s "iPhone Developer: <a class="__cf_email__" href="/cdn-cgi/l/email-protection" data-cfemail="fa80929f949d979394cbc3c2c3ba9d979b9396d4999597">[email&#160;protected]</a> (XXXXXXXXX)" IceAndFire.app/hook1.dylib
</code></pre></li><li><p>使用codesign对app进行签名：</p><pre><code>#!bash
codesign -f -s "iPhone Developer: <a class="__cf_email__" href="/cdn-cgi/l/email-protection" data-cfemail="671d0f0209000a0e09565e5f5e27000a060e0b4904080a">[email&#160;protected]</a> (XXXXXXXXX)" --entitlements Entitlements.plist IceAndFire.app
</code></pre></li><li><p>使用xcrun将IceAndFire.app打包成IceAndFire.ipa：</p><pre><code>#!bash
xcrun -sdk iphoneos PackageApplication -v IceAndFire.app  -o ~/iOSPwn/hook/github/IceAndFire.ipa
</code></pre></li><li><p>使用itunes或者mobiledevice进行安装。</p></li></ol><p><img alt="enter image description here" img-src="e65cc57fb482263cf61c6368524555907fc4dc3c.jpg"></p><p>成功的话会显示”OK”。然后就可以在非越狱的手机上使用我修改后的app了。</p><h1>0x04 Class-dump 和 ida</h1><hr><p>通过上面几节的介绍，我们已经将非越狱app hook的流程走过一遍了，但这时候有人会问：”你hook的app是自己写的，你当然知道应该hook哪个函数了，我想hook的app都是App Store上的，并没有源码，我该怎么办？”其实这个问题也不难解决。只要用好class-dump和ida即可。</p><p>Class-dump是一款可以用来dump头文件工具：</p><p><img alt="p13" img-src="523b60a75a2a71fac66790d3218c6779addfe16d.jpg"></p><p>比如我们想要dump XXX的头文件，只需要执行：</p><pre><code>#!bash
./class-dump -H -o header XXX
</code></pre><p>经过dump后，所有的头文件都会保存在”header”这个文件夹中：</p><p><img alt="p14" img-src="be243d0beceae07ad5836a1a81a2703da0c01ca1.jpg"></p><p>每个头文件中都包含了类和方法的声明：</p><p><img alt="p15" img-src="049753c7e030bb6371e8e029fa498eb291e0f85d.jpg"></p><p>可以看到，利用class-dump能够很好的帮助我们了解app的内部结构。但是class-dump只能获取app的头文件，并不能知道每个方法具体的逻辑，这时候我们就需要用到ida了。</p><p>利用ida我们可以获取到一个方法具体的逻辑，不过这需要你对arm汇编有一定的了解：</p><p><img alt="p16" img-src="a12dc8b311dff472d838289c96dba7cbfb9ed795.jpg"></p><p>比如上图所示的函数就是调用<code>NSLog(@”%@\n”)</code>来向控制台输出参数的内容。只有了解了某个函数具体是做什么的，我们能才知道如何hook这个函数。</p><h1>0x05 微信自动抢红包的原理</h1><hr><p>至于微信自动抢红包的插件无非就是hook了接收微信消息的函数，然后判断消息中有没有红包，有的话就直接调用打开红包的函数即可。但因为这篇文章的主要目的是介绍非越狱手机的app hook，而不是鼓励大家使用外挂，所以具体实现的细节就不公布了，有兴趣的同学可以自己尝试写一个。虽然效果没有机械流那么酷炫，但的确省时省力啊。</p><p><img alt="p17" img-src="2de1b21c7bd1f4b4a58794235c15c84977a314ca.jpg"></p><p><img alt="p18" img-src="de958d582d66b17786f5111640d7f2b6cb0d986c.jpg"></p><h1>0x06 总结</h1><hr><p>通过这篇文章我们可以看到，即使是在非越狱的iOS系统上依然可以玩出很多的花样，因此各大it厂商不要盲目的相信非越狱iOS系统的安全性。针对红包和支付等比较重要的逻辑一定要有混淆和加固，针对app本身一定要有完整性校验。不然好心的白帽子可能只是写个自动抢红包的外挂玩玩，但是黑客就可能利用这种技术开发各种外挂来牟取暴利或者让用户在无意当中安装上带有后门的app，随后会发生什么就只有天知道了。</p><p>最后感谢我的同事黑雪和耀刺对这篇文章的帮助和指导。</p><p>PS: 文中涉及代码可在我的github下载:</p><p><a href="https://github.com/zhengmin1989/iOS_ICE_AND_FIRE">https://github.com/zhengmin1989/iOS&#95;ICE&#95;AND_FIRE</a></p><p></p></section></article><div class="entry-controls clearfix"><div style="float:left;color:#9d9e9f;font-size:15px"><span>&copy;乌云知识库版权所有 未经许可 禁止转载</span></div></div><div id="donate" style="padding:10px;border-top:1px solid #d9d9d9;text-align:center"><span>碎银子打赏，作者好攒钱娶媳妇：</span><br><br><img src="http://static.wooyun.org/wooyun/upload/donate/201507292354527496d304665a3c721617737c107e4e87.png" style="width:200px;height:200px"></div><div id="comments" class="comment-list clearfix"><div id="comment-list"><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">itx</span> <span class="reply-time">2016-06-12 11:46:07</span></div><p></p><p>@昨天<br>我也遇到了，请问有解决了吗</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">coco</span> <span class="reply-time">2016-06-01 16:09:08</span></div><p></p><p>@海蓝 试了一下，重签名的时候，报错Entitlements.plist: cannot read entitlement data,可能因为一些原因还没有公布出来。</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">coco</span> <span class="reply-time">2016-06-01 13:51:34</span></div><p></p><p>虽然MachOView闪退，用不了。但按楼主的步骤试了一遍，可以注入成功并安装。O(∩_∩)O谢谢楼主么么哒！</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">coco</span> <span class="reply-time">2016-06-01 10:12:49</span></div><p></p><p>MachOView闪退什么鬼？</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">major</span> <span class="reply-time">2016-05-26 16:33:04</span></div><p></p><p>@小禾吉 你在非越狱手机上成功dump了吗?</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">Sing9211</span> <span class="reply-time">2016-05-18 15:36:38</span></div><p></p><p>@昨天 你的问题解决了吗？我遇到跟你同样的问题</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">c2y2</span> <span class="reply-time">2016-04-29 16:57:23</span></div><p></p><p>这技术，好多年前在一个移动广告公司见过了，广告行业很早都在使用了</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">Visitor</span> <span class="reply-time">2016-04-20 15:58:17</span></div><p></p><p>@zyzy 我就dump出一个CDStructures文件， 您找到原因了吗？</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">tw</span> <span class="reply-time">2016-04-12 15:09:08</span></div><p></p><p>@昨天 我甚至无法安装，最后只好用ipa installer安装上了，但是安装完后还是闪退，系统9.0.2，怀疑是签名要求变高了<br>LZ求答疑啊</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">abd</span> <span class="reply-time">2016-04-01 17:20:25</span></div><p></p><p>codesign -f -s &quot;xxxxx&quot; ./WeChat.app/PlugIns/WeChatShareExtensionNew.appex<br>codesign -f -s &quot;xxxxx&quot; --entitlements Entitlements.plist ./WeChat.app<br>执行上面两个命令时会出现下面的提示，导致最终的ipa都安装不上，为什么？<br>./WeChat.app: replacing existing signature<br>./WeChat.app: main executable failed strict validation</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">Onelong</span> <span class="reply-time">2016-04-01 09:36:50</span></div><p></p><p>我使用MachOView查看yololib 修改的dylib显示不支持，我是在iphone上dumpdecrypted的文件。但是我自己没发布的是没有问题的。为什么呢？</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">ole</span> <span class="reply-time">2016-03-23 18:15:45</span></div><p></p><p>签名过程完全follow一字不落啊，可是mobiledevice报错!AMDeviceSecureInstallApplication</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">Wendy</span> <span class="reply-time">2016-03-01 10:07:10</span></div><p></p><p>卡在dylib的注入，git上下载的hook1项目编译不过，别的dylib注入不进去</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">anonman</span> <span class="reply-time">2016-02-28 09:09:03</span></div><p></p><p>也就自己玩玩，打了别人签名的微信，你敢用嘛</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">海蓝</span> <span class="reply-time">2016-02-25 18:15:09</span></div><p></p><p>问个问题，<br>把某个APP下载，然后注入一些dylib。<br>然后证书，签名什么的可以用自己的来代替原有的？可以这样么？</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">Bo</span> <span class="reply-time">2016-02-24 11:30:26</span></div><p></p><p>按照教程用自己证书签完名以后还是安装不上呢</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">Bo</span> <span class="reply-time">2016-02-23 17:39:34</span></div><p></p><p>xcode7 怎么创建静态库呢...</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">ruby</span> <span class="reply-time">2016-02-23 12:50:33</span></div><p></p><p>学习了</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">Min</span> <span class="reply-time">2016-02-23 09:47:38</span></div><p></p><p>楼主，系统原生的APP不知能否hook到？</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">X</span> <span class="reply-time">2016-02-22 16:27:25</span></div><p></p><p>卡在dylib那里了 github上的无法编译 自己创建的运行闪退。。。</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">codeeagle</span> <span class="reply-time">2016-02-20 11:12:17</span></div><p></p><p>请问下博主，重签名是一定要企业证书的么？还有，ipa 是从 iTunes 下获得的，不解密，直接重签有问题么。</p><p>现在我试了下，用个人证书重签 iTunes 下载的 ipa，安装成功，但是闪退。能指导下么</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">zyzy</span> <span class="reply-time">2016-02-19 15:35:42</span></div><p></p><p>微信class-dump 不出头文件</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">小荷才露尖尖角</span> <span class="reply-time">2016-02-19 15:11:37</span></div><p></p><p>赞，精华哥</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">昨天</span> <span class="reply-time">2016-02-19 14:36:38</span></div><p></p><p>请教楼主大神，我按照楼主的步骤重新签名，可以安装成功，但是一打开就闪退，这是log：<br>kernel[0] &lt;Notice&gt;: AppleFairplayTextCrypterSession::fairplayOpen() failed, error -42022<br>com.apple.xpc.launchd[1] (UIKitApplication:com.ss.iphone.article.News[0x556f][3235]) &lt;Notice&gt;: Service exited due to signal: Killed: 9<br>assertiond[60] &lt;Warning&gt;: Unable to obtain a task name port right for pid 3235: (os/kern) failure (5)<br>SpringBoard[50] &lt;Warning&gt;: Unable to register for exec notifications: No such process<br>SpringBoard[50] &lt;Warning&gt;: Unable to obtain a task name port right for pid 3235: (os/kern) failure (5)<br>SpringBoard[50] &lt;Warning&gt;: Unable to obtain a task name port right for &lt;FBApplicationProcess: 0x12fcdf110; com.ss.iphone.article.News; pid: 3235&gt;<br>SpringBoard[50] &lt;Warning&gt;: Unable to get short BSD proc info for 3235: No such process<br>SpringBoard[50] &lt;Warning&gt;: Unable to get proc info for 3235: No such process<br>SpringBoard[50] &lt;Warning&gt;: Unable to register for exec notifications: No such process<br>assertiond[60] &lt;Warning&gt;: Could not set priority of &lt;BKNewProcess: 0x155582e80; com.ss.iphone.article.News; pid: 3235; hostpid: -1&gt; to 1, priority: No such process<br>SpringBoard[50] &lt;Warning&gt;: Unable to obtain a task name port right for pid 3235: (os/kern) failure (5)<br>assertiond[60] &lt;Warning&gt;: Could not set priority of &lt;BKNewProcess: 0x155582e80; com.ss.iphone.article.News; pid: 3235; hostpid: -1&gt; to 0, priority: No such process<br>SpringBoard[50] &lt;Warning&gt;: Unable to obtain a task name port right for &lt;FBApplicationProcess: 0x12fcdf110; com.ss.iphone.article.News; pid: 3235&gt;<br>SpringBoard[50] &lt;Warning&gt;: Unable to get short BSD proc info for 3235: No such process<br>SpringBoard[50] &lt;Warning&gt;: Unable to get proc info for 3235: No such process<br>请大神指导！</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">我是叉叉歪</span> <span class="reply-time">2016-02-19 11:06:38</span></div><p></p><p>我怎么没效果 能运行 但是好像没有加载dylib</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">黄瓜</span> <span class="reply-time">2016-02-18 16:52:30</span></div><p></p><p>跟走Demo走了一遍，目前卡在0x02 CaptainHook for Dylib 这里，hook1_Project 编不过，按照 http://blog.csdn.net/stackhero/article/details/9032891 上面的内容自己写了个创建了一个 hook1的Dylib 文件，不知会不会出问题。</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">sniperYJ</span> <span class="reply-time">2016-02-18 16:04:21</span></div><p></p><p>我想请问下如果是别人的app的话embedded.mobileprovision文件用什么呢</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">毛猴</span> <span class="reply-time">2016-02-18 14:40:33</span></div><p></p><p>6666666666666666</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">frank</span> <span class="reply-time">2016-02-18 11:59:08</span></div><p></p><p>证书暴露了你目前就职于ali...嘻嘻</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">小禾吉</span> <span class="reply-time">2016-02-18 11:15:52</span></div><p></p><p>群里抢红包永远是第一...</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">sxyzbbs</span> <span class="reply-time">2016-02-18 11:11:55</span></div><p></p><p>顶！iOS安全2016年一定大火！</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">忧伤珲舞</span> <span class="reply-time">2016-02-18 11:02:39</span></div><p></p><p>果然，现在不越狱也不安全了...</p><p></p></div></div><div class="note-comment"><img class="avatar" alt="30" src="http://wooyun.b0.upaiyun.com/wooyun_job/avatar/default.png"><div class="content"><div class="comment-header"><span class="author-link">Kuuki</span> <span class="reply-time">2016-02-18 10:36:10</span></div><p></p><p>82,666</p><p></p></div></div></div></div></div></main>